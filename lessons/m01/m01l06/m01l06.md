<h2 id="m1l5">Занятие 6: Функции и работа с аргументами</h2>


### 1. Введение в функции

---

#### **Определение функции и важность их использования**

- **Функция**:
  - Функция — это именованный блок кода, который выполняет конкретную задачу. Она позволяет изолировать повторяющиеся операции в отдельные модули, которые можно вызывать по мере необходимости.

- **Зачем использовать функции**:
  - **Повторное использование кода**: Функции позволяют избежать дублирования кода. Один раз написав функцию, вы можете использовать её многократно в разных местах программы.
  - **Упрощение отладки**: Меньшие фрагменты кода легче тестировать и отлаживать.
  - **Улучшение читаемости**: Функции помогают структурировать программу, делая её более понятной. Названия функций могут отражать их назначение, что улучшает читаемость кода.
  - **Модульность и организация**: Функции способствуют организации кода, позволяя логически разделить программу на независимые блоки.

---

#### **Синтаксис функции**

- **Объявление функции**:
  - Функция в Python объявляется с помощью ключевого слова `def`, за которым следует имя функции, круглые скобки (внутри которых могут быть указаны параметры), и двоеточие. Тело функции должно начинаться с отступа (4 пробела).

- **Структура функции**:
  ```python
  def function_name(parameters):
      # Тело функции
      statement(s)
  ```

  - `function_name`: Имя функции. Оно должно быть уникальным и следовать правилам именования идентификаторов в Python.
  - `parameters`: Параметры функции (опционально). Это переменные, которые функция принимает в качестве входных данных.
  - `statement(s)`: Операции, которые выполняет функция.

- **Пример функции**:
  - Пример простой функции, которая выводит сообщение на экран:
    ```python
    def greet():
        print("Hello, world!")
    ```

  - В данном примере:
    - `greet` — имя функции.
    - Функция не принимает никаких параметров.
    - В теле функции выполняется одна операция — вывод строки "Hello, world!" на экран.

- **Вызов функции**:
  - Для выполнения кода, заключенного в функции, нужно её вызвать, используя имя функции и круглые скобки:
    ```python
    greet()
    ```

  - Это вызовет функцию `greet`, и программа выполнит код, содержащийся внутри этой функции.


- **Ключевое слово `return`**:

  - Ключевое слово `return` возвращает указанные после нее значения как результат выполнения функции
    ```python
    def add(a, b):
        return a + b

    result = add(3, 5)
    print(result)  # Результат: 8
    ```
  - Как только интерпретатор встречает `return`, выполнение функции завершает работу, и значение, указанное после `return`, передается в качестве результата выполнения функции.
    ```python
    def add(a, b):
        x = a + b  # `return` отсутсвует
        return x
        x = 5  # Выполнено не будет

    result = add(3, 5)
    print(result)  # Вывод: 8
    ```
  - Если в функции нет `return`, она возвращает значение `None` по умолчанию.

    ```python
    def add(a, b):
        x = a + b  # `return` отсутсвует

    result = add(3, 5)
    print(result)  # Вывод: None
    ```
  - Функция может содержать несколько операторов `return`, но при выполнении функции будет возвращено значение только от первого `return`, который встречается в коде.

    ```python
    def check_value(x):
        if x > 0:
            return "Positive"
        return "Non-positive"

    print(check_value(1))   # Вывод: Positive
    print(check_value(-1))  # Вывод: Non-positive
    ```

### 2. Параметры и аргументы

---

#### **Параметры функции**

- **Определение параметров**:
  - Параметры — это переменные, которые функция принимает при вызове и использует для выполнения своей задачи. Параметры объявляются в скобках после имени функции.

- **Пример функции с параметрами**:
  ```python
  def greet(name):
      print(f"Hello, {name}!")
  ```
  - В этом примере:
    - `name` — это параметр функции `greet`.
    - Параметр `name` используется внутри функции для вывода приветственного сообщения.

- **Передача аргументов в параметры**:
  - Аргументы — это конкретные значения, которые передаются параметрам функции при её вызове.
  - Пример вызова функции с аргументом:
    ```python
    greet("Alice")
    ```
  - В данном случае, аргумент `"Alice"` передается параметру `name`, и функция выводит "Hello, Alice!".

---

#### **Множественные параметры**

- **Определение множественных параметров**:
  - Функция может принимать несколько параметров, что позволяет передавать несколько входных данных в функцию для обработки.

- **Пример функции с несколькими параметрами**:
  ```python
  def add(a, b):
      return a + b
  ```
  - В этом примере:
    - `a` и `b` — это параметры функции `add`.
    - Функция возвращает сумму двух чисел, переданных в качестве аргументов.

- **Вызов функции с несколькими аргументами**:
  ```python
  result = add(5, 3)
  print(result)  # Output: 8
  ```
  - Аргументы `5` и `3` передаются параметрам `a` и `b` соответственно, и функция возвращает их сумму.


#### **Использование аргументов по умолчанию**

- **Определение аргументов по умолчанию**:
  - Аргументы по умолчанию позволяют задавать значения параметров, которые будут использоваться, если при вызове функции не указаны конкретные значения.

- **Синтаксис аргументов по умолчанию**:
  - В параметрах функции можно указать значения по умолчанию:
    ```python
    def greet(name="Guest"):
        print(f"Hello, {name}!")
    ```

- **Пример использования**:
  - Если при вызове функции не передать значение для параметра `name`, будет использовано значение по умолчанию:
    ```python
    greet()        # Output: Hello, Guest!
    greet("Bob")   # Output: Hello, Bob!
    ```

  - В первом вызове функции, так как аргумент не был передан, функция использует значение по умолчанию `"Guest"`.
  - Во втором вызове, значение `"Bob"` заменяет значение по умолчанию.

- **Порядок параметров с аргументами по умолчанию**:
  - Параметры с аргументами по умолчанию должны следовать после обязательных параметров в списке параметров функции.

  - **Правильный пример**:
    ```python
    def example(a, b=10):
        return a + b
    ```
  
  - **Неправильный пример**:
    ```python
    def example(a=10, b):
        return a + b
    ```
    - Параметр `b` не может следовать за параметром `a`, который имеет значение по умолчанию.


### 3. Неопределённое количество аргументов

---

#### **Аргументы `*args`**

- **Определение и назначение**:
  - `*args` позволяет функции принимать произвольное количество позиционных аргументов. Все переданные аргументы собираются в кортеж.

- **Синтаксис использования**:
  - В объявлении функции перед параметром ставится звёздочка (`*`), чтобы указать, что этот параметр будет использоваться для сбора дополнительных позиционных аргументов.
  - Пример:
    ```python
    def print_numbers(*args):
        for number in args:
            print(number)
    ```

- **Примеры использования**:
  - Вызов функции с разным количеством аргументов:
    ```python
    print_numbers(1, 2, 3)       # Output: 1 2 3
    print_numbers(10, 20, 30, 40) # Output: 10 20 30 40
    ```

  - В этом примере, все переданные аргументы собираются в кортеж `args`, который затем перебирается в теле функции.

- **Важно помнить**:
  - Параметр `*args` всегда должен быть последним в списке параметров функции, если используются другие параметры.

---

#### **Аргументы `**kwargs`**

- **Определение и назначение**:
  - `**kwargs` позволяет функции принимать произвольное количество именованных (или ключевых) аргументов. Все переданные аргументы собираются в словарь.

- **Синтаксис использования**:
  - В объявлении функции перед параметром ставится двойная звёздочка (`**`), чтобы указать, что этот параметр будет использоваться для сбора дополнительных именованных аргументов.
  - Пример:
    ```python
    def print_info(**kwargs):
        for key, value in kwargs.items():
            print(f"{key}: {value}")
    ```

- **Примеры использования**:
  - Вызов функции с разными именованными аргументами:
    ```python
    print_info(name="Alice", age=30, city="New York")
    ```
    - Вывод:
      ```
      name: Alice
      age: 30
      city: New York
      ```

  - В этом примере, все переданные именованные аргументы собираются в словарь `kwargs`, который затем перебирается в теле функции.

- **Важно помнить**:
  - Параметр `**kwargs` также должен быть последним в списке параметров функции, если используются другие параметры.

---

### Примеры комбинирования `*args` и `**kwargs`

- **Синтаксис функции с `*args` и `**kwargs`**:
  ```python
  def mixed_function(a, *args, **kwargs):
      print(f"a: {a}")
      print("args:", args)
      print("kwargs:", kwargs)
  ```

- **Примеры вызова**:
  ```python
  mixed_function(1, 2, 3, name="Alice", age=30)
  ```
  - Вывод:
    ```
    a: 1
    args: (2, 3)
    kwargs: {'name': 'Alice', 'age': 30}
    ```

  - В этом примере:
    - `a` получает значение `1`.
    - `*args` собирает дополнительные позиционные аргументы `(2, 3)`.
    - `**kwargs` собирает именованные аргументы `{'name': 'Alice', 'age': 30}`.


### 4. Локальные и глобальные переменные

---

#### **Локальные переменные**

- **Определение**:
  - Локальные переменные объявляются внутри функции и доступны только в пределах этой функции. Они создаются при вызове функции и уничтожаются, когда выполнение функции завершается.

- **Пример использования**:
  ```python
  def local_example():
      x = 10  # Локальная переменная
      print(x)
  ```

  - В этом примере:
    - `x` является локальной переменной, объявленной внутри функции `local_example`.
    - `x` доступна только внутри этой функции. Попытка доступа к `x` за пределами функции вызовет ошибку.

- **Важно помнить**:
  - Локальные переменные не могут быть использованы за пределами функции, в которой они объявлены.

---

#### **Глобальные переменные**

- **Определение**:
  - Глобальные переменные объявляются вне всех функций и доступны в любом месте программы, включая функции. Они создаются при запуске программы и остаются доступными до её завершения.

- **Пример использования**:
  ```python
  x = 20  # Глобальная переменная

  def global_example():
      print(x)
  ```

  - В этом примере:
    - `x` является глобальной переменной, объявленной вне функции.
    - Функция `global_example` может получить доступ к `x` и использовать её значение.

- **Изменение глобальных переменных из функции**:
  - Для изменения глобальной переменной внутри функции необходимо явно указать, что переменная является глобальной, с помощью ключевого слова `global`.

  - Пример:
    ```python
    x = 20  # Глобальная переменная

    def modify_global():
        global x
        x = 30
        print(x)
    ```

  - В этом примере:
    - Ключевое слово `global` указывает, что `x` — это глобальная переменная, и позволяет её изменить.

- **Важно помнить**:
  - Использование глобальных переменных может усложнить отладку и поддержку кода, так как изменение глобальных переменных может затруднить отслеживание изменений. Поэтому рекомендуется ограничивать использование глобальных переменных и использовать их только когда это действительно необходимо.

---

#### **Проблемы и рекомендации**

- **Проблемы с глобальными переменными**:
  - Глобальные переменные могут быть изменены из разных частей программы, что может привести к трудностям в отладке и неожиданным результатам.
  - Код может стать менее модульным и менее понятным.

- **Рекомендации**:
  - Предпочитайте передавать данные между функциями через параметры, а не использовать глобальные переменные.
  - Используйте глобальные переменные только в тех случаях, когда это действительно необходимо и безопасно для логики программы.

