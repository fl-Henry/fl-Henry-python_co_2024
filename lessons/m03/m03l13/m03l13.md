# Занятие 13: Проверка домашнего задания

### Домашнее задание по SQLAlchemy

Цель этого задания — закрепить полученные знания о SQLAlchemy, включая создание моделей, операции CRUD (создание, чтение, обновление, удаление), работу с транзакциями, обработку ошибок и тестирование.

#### Часть 1: Создание базы данных и моделей

1. **Создайте базу данных для управления библиотекой.** Включите следующие таблицы:
   - **Книги (Books)**:
     - `id` (Integer, Primary Key)
     - `title` (String, уникальное)
     - `author` (String)
     - `published_date` (Date)
     - `isbn` (String, уникальное)

   - **Авторы (Authors)**:
     - `id` (Integer, Primary Key)
     - `name` (String, уникальное)
     - `birth_date` (Date)

   - **Заимствования (Loans)**:
     - `id` (Integer, Primary Key)
     - `book_id` (Foreign Key на таблицу Books)
     - `loan_date` (Date)

2. **Настройте отношения между моделями:**
   - Один автор может иметь множество книг.
   - Каждая книга может быть заимствована многократно.

#### Часть 2: Реализация операций CRUD

1. **Реализуйте функции для выполнения операций CRUD:**
   - **Создание**:
     - Функция для добавления новой книги.
     - Функция для добавления нового автора.

   - **Чтение**:
     - Функция для получения информации о книге по её идентификатору.
     - Функция для получения всех книг определённого автора.

   - **Обновление**:
     - Функция для обновления информации о книге (например, изменение заголовка или автора).

   - **Удаление**:
     - Функция для удаления книги из базы данных.
     - Учтите возможность удаления книги, если она была заимствована.

#### Часть 3: Работа с транзакциями и обработка ошибок

**Добавьте обработку ошибок** в функции CRUD:
   - Обработайте исключения, связанные с целостностью данных (например, при удалении книг с зависимостями).
   - Используйте транзакции для обеспечения атомарности операций.

#### Часть 4: Валидация данных и каскадные удаления

1. **Добавьте валидацию данных**:
   - Убедитесь, что заголовок книги и имя автора уникальны.
   - Проверьте, что дата публикации не позднее даты заимствования.

2. **Настройте каскадные удаления**:
   - Убедитесь, что при удалении автора автоматически удаляются все его книги и заимствования, связанные с ними.

#### Часть 5: Документация и отчёт

**Создайте документацию**:
   - Опишите структуру базы данных и её связи.
   - Объясните, как использовать функции CRUD и какие исключения могут возникнуть.

### Ожидаемые результаты

- Полнофункциональная база данных, работающая с библиотекой.
- Корректно реализованные функции CRUD с обработкой ошибок.
- Документация, объясняющая структуру базы данных и использование кода.
